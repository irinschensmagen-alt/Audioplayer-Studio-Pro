<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Studio EDU PRO</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --glass: rgba(255, 255, 255, 0.9);
        }

        /* –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –•–∞–º–µ–ª–µ–æ–Ω */
        @keyframes chameleon {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 0; min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 300% 300%;
            animation: chameleon 15s ease infinite;
            transition: 0.5s;
        }

        .container {
            display: grid; grid-template-columns: 360px 500px; gap: 20px;
            max-width: 950px; width: 95%; position: relative;
        }

        .panel {
            background: var(--glass); backdrop-filter: blur(10px);
            padding: 25px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .logo { width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--primary); }

        .group { margin-bottom: 15px; }
        label { display: block; font-size: 0.75rem; font-weight: bold; color: #666; margin-bottom: 5px; text-transform: uppercase; }
        
        select, input, textarea {
            width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd;
            font-size: 0.9rem; box-sizing: border-box;
        }

        .btn {
            width: 100%; padding: 12px; border: none; border-radius: 12px;
            background: var(--primary); color: white; cursor: pointer;
            font-weight: bold; display: flex; align-items: center; justify-content: center;
            gap: 8px; transition: 0.3s; white-space: nowrap;
        }
        .btn:hover { filter: brightness(1.1); transform: translateY(-2px); }

        /* –ü–ª–µ–µ—Ä */
        .cover { 
            width: 100%; height: 260px; border-radius: 15px; 
            background: #eee center/cover no-repeat; border: 4px solid #fff;
            margin-bottom: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .controls { display: flex; justify-content: center; gap: 15px; margin: 15px 0; }
        .c-btn { 
            width: 55px; height: 55px; border-radius: 15px; border: none;
            background: var(--primary); color: white; font-size: 1.2rem; cursor: pointer;
        }
        .c-btn:disabled { background: #ccc; cursor: not-allowed; }

        #timer { font-size: 1.5rem; font-weight: bold; color: #d63031; text-align: center; margin: 10px 0; }
        
        /* –ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ —ç–∫—Ä–∞–Ω–∞ */
        #lock-screen {
            position: absolute; inset: 0; background: rgba(0,0,0,0.8);
            border-radius: 25px; display: none; flex-direction: column;
            justify-content: center; align-items: center; color: white; z-index: 100;
        }

        .status-badge { 
            display: inline-block; padding: 4px 10px; border-radius: 10px; 
            font-size: 0.7rem; color: white; background: var(--primary); margin-bottom: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <div id="lock-screen"><h1>‚è≥ Time is up</h1><button class="btn" onclick="location.reload()" style="width:200px">Restart</button></div>

    <div class="panel">
        <div class="header">
            <img src="7929d202-ccf0-4e08-8785-785e9179ebd0_removalai_preview.png" class="logo" alt="Logo">
            <h3 style="margin:0">Audio Studio EDU</h3>
        </div>

        <div class="group">
            <label>üåê –Ø–∑—ã–∫ –∏–∑—É—á–µ–Ω–∏—è</label>
            <select id="lang">
                <option value="de" data-tag="germany">Deutsch</option>
                <option value="ru" data-tag="russia">–†—É—Å—Å–∫–∏–π</option>
                <option value="en" data-tag="london">English</option>
                <option value="zh" data-tag="china">‰∏≠Êñá</option>
                <option value="fr" data-tag="paris">Fran√ßais</option>
                <option value="es" data-tag="spain">Espa√±ol</option>
            </select>
        </div>

        <div class="group">
            <label>üéì –†–µ–∂–∏–º</label>
            <select id="mode">
                <option value="teacher">–£—á–∏—Ç–µ–ª—å (Master)</option>
                <option value="student">–£—á–µ–Ω–∏–∫ (Study)</option>
                <option value="test">–≠–∫–∑–∞–º–µ–Ω (Test)</option>
            </select>
        </div>

        <div id="extra-controls" style="margin-top:15px">
            <button class="btn" id="slowBtn" style="background:#00b894; display:none">üê¢ Slow Motion (0.8x)</button>
            <button class="btn" id="loopBtn" style="background:#0984e3; display:none">üîÑ Loop: Off</button>
        </div>

        <div class="group" style="margin-top:20px">
            <label>üì¶ –ö–æ–¥ –¥–ª—è Genially</label>
            <textarea id="iframe-code" readonly></textarea>
            <button class="btn" id="copyBtn" style="margin-top:10px">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
        </div>
    </div>

    <div class="panel">
        <div class="status-badge" id="mode-tag">MODE: TEACHER</div>
        <div class="cover" id="coverArt"></div>
        
        <div id="timer">00:00</div>
        
        <input type="range" id="progress" value="0" step="0.1" style="width:100%; accent-color: var(--primary);">
        <div id="timeText" style="text-align:center; font-size:0.8rem; margin-top:5px">00:00 / 00:00</div>

        <div class="controls">
            <button class="c-btn" id="rewBtn">‚è™</button>
            <button class="c-btn" id="playBtn" style="width:70px; height:70px; border-radius:50%">‚ñ∂</button>
            <button class="c-btn" id="fwdBtn">‚è©</button>
        </div>

        <div class="group" style="border-top:1px solid #eee; padding-top:15px">
            <label>üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ —Ñ–∞–π–ª</label>
            <input type="file" id="audioFile" accept="audio/*">
        </div>
    </div>
</div>

<script>
    const audio = new Audio();
    let playCount = 0;
    let examTimer;
    let isLoop = false;

    // –†–µ–∂–∏–º—ã –∏ –æ–±–ª–æ–∂–∫–∏
    const updateUI = () => {
        const mode = document.getElementById('mode').value;
        const tag = document.getElementById('mode-tag');
        const slow = document.getElementById('slowBtn');
        const loop = document.getElementById('loopBtn');
        const prog = document.getElementById('progress');
        
        // –°–±—Ä–æ—Å
        tag.innerText = `MODE: ${mode.toUpperCase()}`;
        slow.style.display = (mode === 'student') ? 'flex' : 'none';
        loop.style.display = (mode === 'teacher') ? 'flex' : 'none';
        prog.disabled = false;
        playCount = 0;
        clearInterval(examTimer);
        document.getElementById('timer').innerText = (mode === 'test') ? "02:00" : "00:00";

        // –û–±–ª–æ–∂–∫–∞ –ø–æ —è–∑—ã–∫—É
        const langTag = document.getElementById('lang').selectedOptions[0].dataset.tag;
        document.getElementById('coverArt').style.backgroundImage = `url('https://images.unsplash.com/photo-1500000000000?q=80&w=500&auto=format&fit=crop&sig=${Math.random()}')`;
        // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏, API Unsplash —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á.
    };

    document.getElementById('mode').onchange = updateUI;
    document.getElementById('lang').onchange = updateUI;

    // –õ–æ–≥–∏–∫–∞ –ü–ª–µ–µ—Ä–∞
    document.getElementById('playBtn').onclick = () => {
        if (!audio.src) return alert("–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª!");
        
        if (audio.paused) {
            const mode = document.getElementById('mode').value;
            playCount++;

            if (mode === 'test') {
                document.getElementById('progress').disabled = true;
                document.getElementById('rewBtn').disabled = true;
                document.getElementById('fwdBtn').disabled = true;
                startTestTimer();
            }

            if (mode === 'student' && playCount >= 3) {
                document.getElementById('progress').disabled = true;
                document.getElementById('rewBtn').disabled = true;
                document.getElementById('fwdBtn').disabled = true;
                alert("–í–Ω–∏–º–∞–Ω–∏–µ: 3-–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ. –ü–µ—Ä–µ–º–æ—Ç–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞.");
            }

            audio.play();
            document.getElementById('playBtn').innerText = '‚è∏';
        } else {
            audio.pause();
            document.getElementById('playBtn').innerText = '‚ñ∂';
        }
    };

    function startTestTimer() {
        let timeLeft = 120;
        examTimer = setInterval(() => {
            timeLeft--;
            let m = Math.floor(timeLeft/60), s = timeLeft%60;
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
            if (timeLeft <= 0) {
                audio.pause();
                document.getElementById('lock-screen').style.display = 'flex';
                clearInterval(examTimer);
            }
        }, 1000);
    }

    // –î–æ–ø. —Ñ—É–Ω–∫—Ü–∏–∏
    document.getElementById('slowBtn').onclick = () => {
        audio.playbackRate = (audio.playbackRate === 1) ? 0.8 : 1;
        document.getElementById('slowBtn').innerText = (audio.playbackRate === 0.8) ? "‚ñ∂ Normal Speed" : "üê¢ Slow Motion (0.8x)";
    };

    document.getElementById('loopBtn').onclick = () => {
        isLoop = !isLoop;
        audio.loop = isLoop;
        document.getElementById('loopBtn').innerText = isLoop ? "üîÑ Loop: ON" : "üîÑ Loop: OFF";
    };

    document.getElementById('audioFile').onchange = (e) => {
        const file = e.target.files[0];
        if (file) audio.src = URL.createObjectURL(file);
    };

    audio.ontimeupdate = () => {
        const prog = document.getElementById('progress');
        prog.max = audio.duration || 0;
        prog.value = audio.currentTime;
        const fmt = s => new Date(s * 1000).toISOString().substr(14, 5);
        document.getElementById('timeText').innerText = `${fmt(audio.currentTime)} / ${fmt(audio.duration || 0)}`;
    };

    document.getElementById('progress').oninput = (e) => audio.currentTime = e.target.value;
    document.getElementById('rewBtn').onclick = () => audio.currentTime -= 10;
    document.getElementById('fwdBtn').onclick = () => audio.currentTime += 10;

    document.getElementById('copyBtn').onclick = () => {
        const code = `<iframe src="${window.location.href}" width="100%" height="700px" frameborder="0"></iframe>`;
        navigator.clipboard.writeText(code);
        alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
    };

    updateUI();
</script>
</body>
</html>
