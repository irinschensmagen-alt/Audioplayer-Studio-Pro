<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AUDIO STUDIO PRO | UNIVERSAL LANG</title>
    <style>
        :root { 
            --gold-line: #d4af37;
            --gold-grad: linear-gradient(135deg, #e5c064 0%, #f9e1a9 50%, #d4af37 100%);
            --sidebar-bg: #fcfdfe;
            --text-main: #1a4a7a;
            --accent-gold: #b8860b;
        }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--sidebar-bg); display: flex; height: 100vh; overflow: hidden; color: var(--text-main); }

        /* –®–¢–û–†–ö–ò */
        .drawer { position: fixed; right: -515px; top: 0; width: 500px; height: 100%; background: white; transition: right 0.4s ease; box-shadow: -10px 0 25px rgba(0,0,0,0.1); z-index: 100; }
        .drawer-mat { z-index: 110; border-left: 4px solid #5da9e1; }
        .drawer-dict { border-left: 3px solid var(--gold-line); }
        body.dict-open .drawer-dict, body.mat-open .drawer-mat { right: 0; }
        .drawer iframe { width: 100%; height: 100%; border: none; display: block; }

        .drawer-triggers { position: fixed; right: 0; top: 40%; display: flex; flex-direction: column; gap: 10px; z-index: 120; }
        .t-btn { width: 45px; height: 60px; border: none; border-radius: 12px 0 0 12px; cursor: pointer; color: white; font-size: 1.4rem; display: flex; align-items: center; justify-content: center; }

        /* –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø */
        .sidebar-left { width: 310px; border-right: 1px solid #ddd; padding: 20px; display: flex; flex-direction: column; gap: 10px; background: white; overflow-y: auto; flex-shrink: 0; }
        .player-zone { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle at 30% 20%, #ffffff 0%, #f4faff 45%, #eef8ff 100%); transition: margin-right 0.4s; }
        body.dict-open .player-zone, body.mat-open .player-zone { margin-right: 500px; }

        .card { border: 2px solid var(--gold-line); border-radius: 15px; padding: 10px; background: white; margin-bottom: 5px; }
        label { font-size: 0.7rem; font-weight: 900; color: var(--accent-gold); display: block; margin-bottom: 4px; text-transform: uppercase; }
        
        .input-row { display: flex; align-items: center; gap: 5px; background: #f9f9f9; padding: 5px 10px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 5px; height: 32px; position: relative; }
        input, select { border: none; background: transparent; width: 100%; outline: none; font-size: 0.85rem; font-weight: bold; color: var(--text-main); }

        .go-btn { background: none; border: none; cursor: pointer; font-size: 1.1rem; color: var(--gold-line); padding: 0; }
        .x-btn { color: #ff8e8e; border: none; background: none; cursor: pointer; font-weight: bold; font-size: 1rem; }

        /* –ü–õ–ï–ï–† */
        .cover { width: 400px; height: 225px; border-radius: 20px; border: 3px solid var(--gold-line); background: #fff; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 5rem; background-size: cover; background-position: center; }
        .controls { display: flex; align-items: center; gap: 30px; margin-top: 10px; }
        .play-btn { width: 70px; height: 70px; border-radius: 50%; background: var(--gold-grad); border: none; color: white; font-size: 1.8rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .time-box { width: 400px; display: flex; justify-content: space-between; font-size: 0.8rem; font-weight: bold; color: var(--accent-gold); margin-bottom: 5px; }
        #prog { width: 400px; accent-color: var(--gold-line); cursor: pointer; }

        .grid-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 85%; margin-top: 25px; }
        .file-text { font-size: 0.8rem; color: #78a1c4; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex: 1; }
    </style>
</head>
<body class="dict-open">

<div class="drawer-triggers">
    <button class="t-btn" style="background:var(--gold-grad)" onclick="toggleDrawer('dict')">üìñ</button>
    <button class="t-btn" style="background:#5da9e1" onclick="toggleDrawer('mat')">üìÇ</button>
</div>

<div class="sidebar-left">
    <div style="text-align:center"><img src="https://irinschensmagen-alt.github.io/Audioplayer-Studio-Pro/logo.png" style="width:60px; margin-bottom:5px;"></div>
    
    <div class="card"><label id="l-lang"></label><select id="langSelect" onchange="updateUI()"></select></div>
    
    <div class="card">
        <label id="l-mat"></label>
        <div class="input-row"><input type="text" id="u-mat" placeholder="Link"><button class="go-btn" onclick="setMat(document.getElementById('u-mat').value)">üìé</button></div>
        <div class="input-row">
            <input type="file" style="position:absolute; opacity:0; width:100%; cursor:pointer" onchange="handleFile(this,'mat')">
            <span id="f-mat-n" class="file-text">üìÅ</span>
        </div>
    </div>

    <div class="card"><label id="l-mode"></label><select id="modeSelect"><option value="study" id="opt-study"></option><option value="master" id="opt-master"></option><option value="test" id="opt-test"></option></select></div>
    
    <button id="slowBtn" style="background:#5da9e1; color:white; border:none; padding:10px; border-radius:12px; font-weight:900; margin-bottom:5px; cursor:pointer;">üê¢ <span id="l-slow"></span></button>

    <div class="card">
        <label id="l-dict"></label>
        <div class="input-row"><input type="text" id="u-dict"><button class="go-btn" onclick="setDict(document.getElementById('u-dict').value)">üìé</button><button class="x-btn" onclick="resetDict()">‚úñ</button></div>
    </div>
</div>

<div class="drawer drawer-dict"><iframe id="dict-frame"></iframe></div>
<div class="drawer drawer-mat"><iframe id="mat-frame"></iframe></div>

<div class="player-zone">
    <div class="cover" id="cover">‚ô´</div>
    <div class="time-box"><span id="time-cur">0:00</span><span id="time-dur">0:00</span></div>
    <input type="range" id="prog" value="0" min="0" step="0.1" oninput="audio.currentTime=this.value">
    <div class="controls">
        <button class="go-btn" style="font-size:2.5rem; color:var(--text-main)" onclick="audio.currentTime-=10">‚è™</button>
        <button class="play-btn" id="playBtn" onclick="togglePlay()">‚ñ∂</button>
        <button class="go-btn" style="font-size:2.5rem; color:var(--text-main)" onclick="audio.currentTime+=10">‚è©</button>
    </div>

    <div class="grid-inputs">
        <div class="card">
            <label id="l-aud"></label>
            <div class="input-row"><input type="text" id="u-aud-main" placeholder="URL"><button class="go-btn" onclick="setAudio(document.getElementById('u-aud-main').value)">üìé</button></div>
            <div class="input-row"><input type="file" style="position:absolute; opacity:0; width:100%; cursor:pointer" onchange="handleFile(this,'aud')"><span id="f-aud-n" class="file-text">üìÅ</span></div>
        </div>
        <div class="card">
            <label id="l-img"></label>
            <div class="input-row"><input type="text" id="u-img-main" placeholder="URL"><button class="go-btn" onclick="setImg(document.getElementById('u-img-main').value)">üìé</button></div>
            <div class="input-row"><input type="file" style="position:absolute; opacity:0; width:100%; cursor:pointer" onchange="handleFile(this,'img')"><span id="f-img-n" class="file-text">üìÅ</span></div>
        </div>
    </div>
</div>

<script>
    const DEFAULT_DICT = "https://www.wiktionary.org/";
    const audio = new Audio();
    const langs = {
        ru: { n:"–†—É—Å—Å–∫–∏–π", l:"–Ø–∑—ã–∫", m:"–ú–∞—Ç–µ—Ä–∏–∞–ª—ã", md:"–†–µ–∂–∏–º", d:"–°–ª–æ–≤–∞—Ä—å URL", s:"–£—á–µ–Ω–∏–∫", ms:"–ú–∞—Å—Ç–µ—Ä", t:"–¢–µ—Å—Ç", a:"–ê—É–¥–∏–æ", i:"–ö–∞—Ä—Ç–∏–Ω–∫–∞", f:"–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª", sl:"–ó–∞–º–µ–¥–ª–µ–Ω–∏–µ 0.8x" },
        en: { n:"English", l:"Language", m:"Materials", md:"Mode", d:"Dictionary URL", s:"Study", ms:"Master", t:"Test", a:"Audio", i:"Image", f:"Choose File", sl:"Slow 0.8x" },
        de: { n:"Deutsch", l:"Sprache", m:"Materialien", md:"Modus", d:"W√∂rterbuch URL", s:"Lerner", ms:"Meister", t:"Test", a:"Audio", i:"Bild", f:"Datei w√§hlen", sl:"Tempo 0.8x" },
        ja: { n:"Êó•Êú¨Ë™û", l:"Ë®ÄË™û", m:"ÊïôÊùê", md:"„É¢„Éº„Éâ", d:"ËæûÊõ∏URL", s:"Â≠¶Áøí", ms:"„Éû„Çπ„Çø„Éº", t:"„ÉÜ„Çπ„Éà", a:"Èü≥Â£∞", i:"ÁîªÂÉè", f:"„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû", sl:"„Çπ„É≠„Éº 0.8x" },
        zh: { n:"‰∏≠Êñá", l:"ËØ≠Ë®Ä", m:"ÊùêÊñô", md:"Ê®°Âºè", d:"ËØçÂÖ∏URL", s:"Â≠¶‰π†", ms:"Â§ßÂ∏à", t:"ÊµãËØï", a:"Èü≥È¢ë", i:"ÂõæÁâá", f:"ÈÄâÊã©Êñá‰ª∂", sl:"ÊÖ¢ÈÄü 0.8x" },
        fa: { n:"ŸÅÿßÿ±ÿ≥€å", l:"ÿ≤ÿ®ÿßŸÜ", m:"ŸÖŸàÿßÿØ", md:"ÿ≠ÿßŸÑÿ™", d:"ŸÑ€åŸÜ⁄© ÿØ€å⁄©ÿ¥ŸÜÿ±€å", s:"ŸÖÿ∑ÿßŸÑÿπŸá", ms:"ÿßÿ≥ÿ™ÿßÿØ", t:"ÿ™ÿ≥ÿ™", a:"ÿµŸàÿ™€å", i:"ÿ™ÿµŸà€åÿ±", f:"ÿßŸÜÿ™ÿÆÿßÿ® ŸÅÿß€åŸÑ", sl:"ÿ¢Ÿáÿ≥ÿ™Ÿá €∞.€∏x" },
        hi: { n:"‡§π‡§ø‡§®‡•ç‡§¶‡•Ä", l:"‡§≠‡§æ‡§∑‡§æ", m:"‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä", md:"‡§Æ‡•ã‡§°", d:"‡§∂‡§¨‡•ç‡§¶‡§ï‡•ã‡§∂ URL", s:"‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§®", ms:"‡§Æ‡§æ‡§∏‡•ç‡§ü‡§∞", t:"‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ", a:"‡§ë–¥–∏–æ", i:"–∫–∞—Ä—Ç–∏–Ω–∫–∞", f:"‡§´‡§º–∞–π–ª ‡§ö‡•Å‡§®‡•á‡§Ç", sl:"‡§ß‡•Ä‡§Æ‡§æ 0.8x" },
        ar: { n:"ÿßŸÑÿπÿ±ÿ®Ÿäÿ©", l:"ÿßŸÑŸÑÿ∫ÿ©", m:"ÿßŸÑŸÖŸàÿßÿØ", md:"ÿßŸÑŸàÿ∂ÿπ", d:"ŸÇÿßŸÖŸàÿ≥ URL", s:"ÿØÿ±ÿßÿ≥ÿ©", ms:"ŸÖÿßÿ≥ÿ™ÿ±", t:"ÿßÿÆÿ™ÿ®ÿßÿ±", a:"ÿµŸàÿ™", i:"ÿµŸàÿ±ÿ©", f:"ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ", sl:"ÿ®ÿ∑Ÿäÿ° 0.8x" },
        pt: { n:"Portugu√™s", l:"Idioma", m:"Materiais", md:"Modo", d:"Dicion√°rio URL", s:"Estudo", ms:"Mestre", t:"Teste", a:"√Åudio", i:"Imagem", f:"Escolher arquivo", sl:"Lento 0.8x" },
        fr: { n:"Fran√ßais", l:"Langue", m:"Mat√©riels", md:"Mode", d:"URL Dictionnaire", s:"√âtude", ms:"Ma√Ætre", t:"Test", a:"Audio", i:"Image", f:"Choisir un fichier", sl:"Lent 0.8x" },
        es: { n:"Espa√±ol", l:"Idioma", m:"Materiales", md:"Modo", d:"URL Diccionario", s:"Estudio", ms:"Maestro", t:"Prueba", a:"Audio", i:"Imagen", f:"Elegir archivo", sl:"Lento 0.8x" },
        it: { n:"Italiano", l:"Lingua", m:"Materiali", md:"Modo", d:"URL Dizionario", s:"Studio", ms:"Master", t:"Test", a:"Audio", i:"Immagine", f:"Scegli file", sl:"Lento 0.8x" }
    };

    function updateUI() {
        const t = langs[document.getElementById('langSelect').value];
        document.getElementById('l-lang').innerText = t.l; document.getElementById('l-mat').innerText = t.m;
        document.getElementById('l-mode').innerText = t.md; document.getElementById('l-dict').innerText = t.d;
        document.getElementById('l-aud').innerText = t.a; document.getElementById('l-img').innerText = t.i;
        document.getElementById('l-slow').innerText = t.sl; document.getElementById('opt-study').innerText = t.s;
        document.getElementById('opt-master').innerText = t.ms; document.getElementById('opt-test').innerText = t.t;
        ['f-mat-n', 'f-aud-n', 'f-img-n'].forEach(id => { if(document.getElementById(id).innerText.includes('üìÅ')) document.getElementById(id).innerText = "üìÅ " + t.f; });
    }

    function togglePlay() { 
        if(!audio.src) return; 
        if(audio.paused) { audio.play(); document.getElementById('playBtn').innerText='‚è∏'; }
        else { audio.pause(); document.getElementById('playBtn').innerText='‚ñ∂'; }
    }

    audio.ontimeupdate = () => { 
        document.getElementById('prog').value = audio.currentTime; 
        document.getElementById('time-cur').innerText = fmt(audio.currentTime); 
    };
    audio.onloadedmetadata = () => { 
        document.getElementById('prog').max = audio.duration; 
        document.getElementById('time-dur').innerText = fmt(audio.duration); 
    };
    function fmt(s) { let m=Math.floor(s/60); let sc=Math.floor(s%60); return `${m}:${sc<10?'0':''}${sc}`; }

    function setAudio(v) { if(v) { audio.src = v; document.getElementById('playBtn').innerText='‚ñ∂'; } }
    function setImg(v) { if(v) { document.getElementById('cover').style.backgroundImage = `url(${v})`; document.getElementById('cover').innerText=''; } }
    function setDict(v) { document.getElementById('dict-frame').src = v.startsWith('http')?v:'https://'+v; toggleDrawer('dict'); }
    function setMat(v) { document.getElementById('mat-frame').src = v.startsWith('http')?v:'https://'+v; toggleDrawer('mat'); }
    function resetDict() { document.getElementById('u-dict').value=DEFAULT_DICT; setDict(DEFAULT_DICT); }
    function toggleDrawer(t) { document.body.classList.remove('dict-open','mat-open'); document.body.classList.add(t+'-open'); }

    function handleFile(i, t) {
        if(!i.files[0]) return;
        const u = URL.createObjectURL(i.files[0]);
        if(t==='mat') { document.getElementById('mat-frame').src=u; document.getElementById('f-mat-n').innerText=i.files[0].name; toggleDrawer('mat'); }
        if(t==='aud') { audio.src=u; document.getElementById('f-aud-n').innerText=i.files[0].name; }
        if(t==='img') { setImg(u); document.getElementById('f-img-n').innerText=i.files[0].name; }
    }

    const sel = document.getElementById('langSelect');
    Object.keys(langs).forEach(c => sel.add(new Option(langs[c].n, c)));
    sel.value = 'ru'; resetDict(); updateUI();
</script>
</body>
</html>
