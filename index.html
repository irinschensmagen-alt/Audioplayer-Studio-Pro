<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deutsch interaktiv Studio GOLD</title>
    <style>
        :root { 
            --gold: linear-gradient(135deg, #d4af37, #f1c40f, #c5a028);
            --gold-text: #b8860b;
            --bg: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            --panel-bg: rgba(255, 255, 255, 0.9);
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            margin: 0; padding: 0; min-height: 100vh; 
            background: var(--bg); color: #5d5d5d; 
            display: flex; justify-content: center; overflow-x: hidden;
        }

        .container { 
            display: grid; grid-template-columns: 340px 1fr; 
            width: 100vw; height: 100vh; gap: 0;
        }

        .settings-panel { 
            background: var(--panel-bg); padding: 25px; 
            box-sizing: border-box; border-right: 1px solid #e0e0e0;
            display: flex; flex-direction: column; overflow-y: auto;
        }

        .player-panel { 
            padding: 20px; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; position: relative;
        }

        .header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; border-bottom: 2px solid #f1c40f; padding-bottom: 10px; }
        .logo { width: 45px; height: 45px; border-radius: 50%; border: 2px solid #d4af37; background: #fff; }

        .cover-art { 
            width: 100%; max-width: 480px; height: 280px; 
            border-radius: 30px; background: #fdfdfd center/cover no-repeat;
            border: 6px solid #fff; box-shadow: var(--shadow);
            display: flex; align-items: center; justify-content: center; position: relative;
        }
        .cover-art::after { content: "üéµ"; font-size: 70px; opacity: 0.1; }
        .has-img::after { display: none; }

        label { display: block; font-size: 0.7rem; font-weight: bold; margin: 12px 0 5px; text-transform: uppercase; color: var(--gold-text); }
        .hint { font-size: 0.65rem; color: #999; margin-bottom: 8px; font-style: italic; }

        select, input, textarea { 
            width: 100%; padding: 11px; border-radius: 12px; 
            border: 1px solid #ddd; margin-bottom: 10px; font-size: 0.85rem; box-sizing: border-box;
            background: #fff; transition: 0.3s;
        }
        select:focus, input:focus { border-color: #f1c40f; outline: none; box-shadow: 0 0 8px rgba(241, 196, 15, 0.2); }

        .btn { 
            width: 100%; padding: 14px; border: none; border-radius: 15px; 
            background: var(--gold); color: white; cursor: pointer; 
            font-weight: bold; margin-top: 10px; font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3); transition: 0.3s;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4); }

        .controls { display: flex; gap: 20px; margin: 25px 0; align-items: center; }
        .c-btn { 
            width: 50px; height: 50px; border-radius: 15px; border: none;
            background: #fff; color: #d4af37; font-size: 1.2rem; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: 0.2s;
        }
        .c-btn:hover { background: #fdfcf0; transform: scale(1.05); }
        .c-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        #play { 
            width: 75px; height: 75px; border-radius: 50%; font-size: 2rem; 
            background: var(--gold); color: white;
        }

        #prog { width: 100%; max-width: 600px; accent-color: #d4af37; cursor: pointer; }
        #time-txt { font-weight: bold; color: var(--gold-text); margin-top: 10px; font-family: monospace; }

        #lock-screen { 
            position: absolute; inset: 0; background: rgba(255,255,255,0.98); 
            z-index: 1000; display: none; flex-direction: column; 
            align-items: center; justify-content: center; text-align: center; padding: 20px;
        }

        @media (max-width: 850px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div id="lock-screen">
    <h1 id="lock-title" style="color:#d4af37">Time is up</h1>
    <p id="lock-desc">–≠–∫–∑–∞–º–µ–Ω –æ–∫–æ–Ω—á–µ–Ω. –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç.</p>
    <button class="btn" onclick="location.reload()" style="width:180px">Restart</button>
</div>

<div class="container">
    <div class="settings-panel">
        <div class="header">
            <img src="logo.png" class="logo" alt="Logo" onerror="this.src='https://via.placeholder.com/50/d4af37/ffffff?text=DI'">
            <h3 id="ui-title" style="margin:0; font-size:1.1rem">Audio Studio</h3>
        </div>

        <label id="lbl-lang">üåê –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
        <select id="langSet">
            <option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="de">Deutsch</option><option value="en">English</option>
            <option value="fr">Fran√ßais</option><option value="it">Italiano</option><option value="es">Espa√±ol</option>
            <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option><option value="pl">Polski</option><option value="tr">T√ºrk√ße</option>
            <option value="cs">ƒåe≈°tina</option><option value="hu">Magyar</option>
        </select>

        <label id="lbl-mode">üéì –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</label>
        <select id="modeSet">
            <option value="master">Master Mode (Loop)</option>
            <option value="study" selected>Study Mode (Slow/Limit)</option>
            <option value="test">Test Mode (Exam)</option>
        </select>

        <button class="btn" id="slowBtn" style="background:#00b894; display:none">üê¢ Slow 0.8x</button>
        <button class="btn" id="loopBtn" style="background:#0984e3; display:none">üîÑ Loop: Off</button>

        <label style="margin-top:20px" id="lbl-code">üì¶ –ö–æ–¥ –≤—Å—Ç–∞–≤–∫–∏ (Genially)</label>
        <textarea id="ifOut" readonly placeholder="–ö–æ–¥ –±—É–¥–µ—Ç –∑–¥–µ—Å—å..."></textarea>
        <button class="btn" id="copyBtn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
    </div>

    <div class="player-panel">
        <div id="attempt-msg" style="color:#d4af37; font-weight:800; margin-bottom:10px; font-size:1.1rem;"></div>
        <div class="cover-art" id="cover"></div>
        
        <input type="range" id="prog" value="0" step="0.1">
        <div id="time-txt">00:00 / 00:00</div>

        <div class="controls">
            <button class="c-btn" id="rew">‚è™</button>
            <button class="c-btn" id="play">‚ñ∂</button>
            <button class="c-btn" id="fwd">‚è©</button>
        </div>

        <div style="width:100%; max-width:500px;">
            <label id="lbl-aud-url">üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –ê—É–¥–∏–æ (URL)</label>
            <div class="hint" id="hint-aud">–ü—Ä. –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏ –Ω–∞ ¬´–°–∫–∞—á–∞—Ç—å¬ª ‚Üí –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</div>
            <input type="text" id="audUrl" placeholder="https://...">

            <label id="lbl-img-url">üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –û–±–ª–æ–∂–∫—É (URL)</label>
            <input type="text" id="imgUrl" placeholder="https://...">
            
            <label id="lbl-file">üìÅ –ò–ª–∏ —Ñ–∞–π–ª –∞—É–¥–∏–æ</label>
            <input type="file" id="audIn" accept="audio/*">
        </div>
    </div>
</div>

<script>
    const audio = new Audio();
    audio.preservesPitch = true;
    let plays = 0;

    const dict = {
        ru: { title: "–ê—É–¥–∏–æ –°—Ç—É–¥–∏—è", lang: "üåê –Ø–∑—ã–∫", mode: "üéì –†–µ–∂–∏–º", code: "üì¶ –ö–æ–¥ –≤—Å—Ç–∞–≤–∫–∏", copy: "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥", audUrl: "üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –∞—É–¥–∏–æ", imgUrl: "üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–ª–æ–∂–∫—É", file: "üìÅ –ò–ª–∏ —Ñ–∞–π–ª", hint: "–ü—Ä. –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏ –Ω–∞ ¬´–°–∫–∞—á–∞—Ç—å¬ª ‚Üí –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å", attempt: "–ü–æ–ø—ã—Ç–∫–∞", lockTitle: "–í—Ä–µ–º—è –≤—ã—à–ª–æ", lockDesc: "–≠–∫–∑–∞–º–µ–Ω –æ–∫–æ–Ω—á–µ–Ω. –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç." },
        de: { title: "Audio Studio", lang: "üåê Sprache", mode: "üéì Modus", code: "üì¶ Iframe-Code", copy: "Code kopieren", audUrl: "üîó Audio-Link", imgUrl: "üîó Cover-Link", file: "üìÅ Oder Datei", hint: "Rechtsklick auf 'Download' ‚Üí Link kopieren", attempt: "Versuch", lockTitle: "Zeit um", lockDesc: "Zugriff gesperrt." },
        en: { title: "Audio Studio", lang: "üåê Language", mode: "üéì Mode", code: "üì¶ Embed Code", copy: "Copy Code", audUrl: "üîó Audio URL", imgUrl: "üîó Cover URL", file: "üìÅ Or File", hint: "Right click 'Download' ‚Üí Copy link", attempt: "Attempt", lockTitle: "Time is up", lockDesc: "Access denied." }
    };

    function updateUI() {
        const lang = document.getElementById('langSet').value;
        const t = dict[lang] || dict.en;
        document.getElementById('ui-title').innerText = t.title;
        document.getElementById('lbl-lang').innerText = t.lang;
        document.getElementById('lbl-mode').innerText = t.mode;
        document.getElementById('lbl-code').innerText = t.code;
        document.getElementById('copyBtn').innerText = t.copy;
        document.getElementById('lbl-aud-url').innerText = t.audUrl;
        document.getElementById('lbl-img-url').innerText = t.imgUrl;
        document.getElementById('lbl-file').innerText = t.file;
        document.getElementById('hint-aud').innerText = t.hint;
        document.getElementById('lock-title').innerText = t.lockTitle;
        document.getElementById('lock-desc').innerText = t.lockDesc;
        showAttemptMsg();
    }

    function showAttemptMsg() {
        const m = document.getElementById('modeSet').value;
        const lang = document.getElementById('langSet').value;
        const t = dict[lang] || dict.en;
        if(m === 'study' || m === 'test') {
            document.getElementById('attempt-msg').innerText = `${t.attempt}: ${plays + 1} / 2`;
        } else {
            document.getElementById('attempt-msg').innerText = "";
        }
    }

    document.getElementById('langSet').onchange = updateUI;
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    document.getElementById('audUrl').oninput = function() { if(this.value.trim()) { audio.src = this.value.trim(); plays = 0; showAttemptMsg(); } };
    document.getElementById('imgUrl').oninput = function() {
        if(this.value.trim()) {
            document.getElementById('cover').style.backgroundImage = `url(${this.value.trim()})`;
            document.getElementById('cover').classList.add('has-img');
        }
    };
    document.getElementById('audIn').onchange = (e) => { audio.src = URL.createObjectURL(e.target.files[0]); plays = 0; showAttemptMsg(); };

    document.getElementById('modeSet').onchange = function() {
        const m = this.value; plays = 0; audio.loop = false; audio.playbackRate = 1;
        document.getElementById('slowBtn').style.display = (m==='study') ? 'block' : 'none';
        document.getElementById('loopBtn').style.display = (m==='master') ? 'block' : 'none';
        
        // –í Test Mode –±–ª–æ–∫–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–æ—Ç–∫—É —Å—Ä–∞–∑—É
        const isTest = (m === 'test');
        document.getElementById('prog').style.pointerEvents = isTest ? 'none' : 'auto';
        document.getElementById('rew').disabled = isTest;
        document.getElementById('fwd').disabled = isTest;
        showAttemptMsg();
    };

    document.getElementById('play').onclick = () => {
        if(!audio.src) return alert("–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ!");
        if(audio.paused) { audio.play(); document.getElementById('play').innerText = '‚è∏'; }
        else { audio.pause(); document.getElementById('play').innerText = '‚ñ∂'; }
    };

    audio.onplay = () => {
        const m = document.getElementById('modeSet').value;
        if((m === 'study' || m === 'test') && audio.currentTime === 0) {
            plays++;
            showAttemptMsg();
            if(plays > 2) { audio.pause(); document.getElementById('lock-screen').style.display = 'flex'; }
            
            // –í Study Mode –±–ª–æ–∫–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–æ—Ç–∫—É –ø–æ—Å–ª–µ 2-–π –ø–æ–ø—ã—Ç–∫–∏
            if(m === 'study' && plays >= 3) {
                document.getElementById('prog').style.pointerEvents = 'none';
                document.getElementById('rew').disabled = true;
                document.getElementById('fwd').disabled = true;
            }
        }
    };

    audio.onended = () => {
        document.getElementById('play').innerText = '‚ñ∂';
        const m = document.getElementById('modeSet').value;
        if((m === 'study' || m === 'test') && plays >= 2) document.getElementById('lock-screen').style.display = 'flex';
    };

    audio.ontimeupdate = () => {
        const p = document.getElementById('prog');
        p.max = audio.duration || 0; p.value = audio.currentTime;
        const fmt = s => new Date(s * 1000).toISOString().substr(14, 5);
        document.getElementById('time-txt').innerText = `${fmt(audio.currentTime)} / ${fmt(audio.duration || 0)}`;
    };

    document.getElementById('prog').oninput = (e) => audio.currentTime = e.target.value;
    document.getElementById('rew').onclick = () => audio.currentTime -= 10;
    document.getElementById('fwd').onclick = () => audio.currentTime += 10;
    
    document.getElementById('slowBtn').onclick = function() {
        audio.playbackRate = (audio.playbackRate === 1) ? 0.8 : 1;
        this.style.opacity = (audio.playbackRate === 0.8) ? "0.6" : "1";
    };
    
    document.getElementById('loopBtn').onclick = function() {
        audio.loop = !audio.loop;
        this.innerText = audio.loop ? "üîÑ Loop: ON" : "üîÑ Loop: OFF";
    };

    document.getElementById('copyBtn').onclick = () => {
        const code = `<iframe src="${window.location.href}" width="100%" height="600px" frameborder="0" scrolling="no" style="overflow:hidden; border-radius:30px;"></iframe>`;
        document.getElementById('ifOut').value = code;
        navigator.clipboard.writeText(code);
        alert("–ö–æ–¥ —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
    };

    updateUI();
</script>
</body>
</html>
